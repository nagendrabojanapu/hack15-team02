@import "compass/css3";

$size: 450px;
$color: lightblue;

// mixins
@mixin animation($value) {
  -webkit-animation: unquote($value);
  -moz-animation: unquote($value);
  -o-animation: unquote($value);
  animation: unquote($value);
}

@mixin keyframes($name) {
  @-webkit-keyframes #{$name} {
    @content;
  }
  @-moz-keyframes #{$name} {
    @content;
  }
  @-o-keyframes #{$name} {
    @content;
  }
  @keyframes #{$name} {
    @content;
  }
}

@mixin animation-property($property, $value) {
  -webkit-animation-#{$property}: unquote($value);
  -moz-animation-#{$property}: unquote($value);
  -o-animation-#{$property}: unquote($value);
  animation-#{$property}: unquote($value);
}

// animations
@include keyframes('rotate'){
  0% { @include rotateY(0deg); }
  75% { @include rotateY(360deg); }
  100% { @include rotateY(360deg); }
}

// styles
body {
 background: url('http://subtlepatterns.com/patterns/concrete_seamless.png'); 
}

main {
  width: $size;
  margin: 1em auto;
}

form {
  section + section {
    margin-top: .5em;
  }
  
  .geoloaction {
    display: none;

    // modernizr class
    html.geolocation & {
      display: inline-block;
    }
  }
  
  .debug {
    opacity: .5;
  }
  
  small {
    display: block;
    margin: 1em 0;
    font-size: .75em;
    color: darken($color, 10);
  }
}

.map {
  position: relative;
  border: 1px solid #ccc;
  margin: 1em 0;
  height: $size;
  
  &.loading {
    &:before,
    &:after {
      display: block;
      position: absolute;
    }
    
    &:before {
      @include animation('rotate 3s');
      @include animation-property('iteration-count', 'infinite');
      z-index: 1001;
      content: '\f05b';
      left: 50%;
      top: 50%;
      margin: {
        top: -51px;
        left: -43px;
      }
      font-family: 'FontAwesome';
      font-size: 100px;
      color: #fff;
    }
    
    &:after {
      z-index: 1000;
      content: '';
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
      background-color: rgba(#000, .5);
    }
  }
}

.info {
  display: block;
  font-size: .8em;
  list-style-type: none;
  padding-left: 0;
  text-align: center;
  color: #aaa;
  
  li {
    display: inline-block;
    
    &:after {
      content: ', ';
    }
    
    &:last-child:after {
      content: '';
    }
  }
}

[type="text"] {
  border: 1px solid #ccc;
  padding: .4em .5em;
  
  &:focus {
    outline: none;
    border-color: $color;
  }
}

.button {
  @include single-transition(background-color, .3s);
  display: inline-block;
  padding: .4em .5em;
  border: 1px solid darken($color, 10);
  font-size: .9em;
  border-radius: 5px;
  background-color: $color;
  
  &:hover {
    background-color: darken($color, 10);
  }
  
  &:focus {
    outline: none;
  }
}